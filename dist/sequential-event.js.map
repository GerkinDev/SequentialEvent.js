{"version":3,"sources":["sequential-event.js"],"names":["f","exports","module","define","amd","g","window","global","self","SequentialEvent","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","uEvent","emitHandlers","handlers","object","args","emitHandler","handlersLength","sourcePromise","Promise","resolve","reject","getNextPromise","prevResolve","stepArgs","concat","slice","newPromise","then","catch","handler","retVal","apply","Proto","mixin","prototype","trigger","type","events","__events","retPromise","root","factory","returnTrue","returnFalse","Event","typeReadOnly","argsReadonly","Object","defineProperties","get","set","value","enumerable","constructor","isDefaultPrevented","isPropagationStopped","preventDefault","stopPropagation","on","callback","event","hasOwnProperty","push","split","forEach","off","index","indexOf","splice","once","__once","Array","arguments","handleEvent","change","target","names","name","method","writable"],"mappings":"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","file":"sequential-event.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.SequentialEvent = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n/**\n * @file File defining the SequentialEvent class\n * @licence GPLv3\n * @author Gerkin\n */\n\nconst uEvent = require( 'uevent' );\n\n/**\n * Handle execution of all handlers in sequence.\n *\n * @param   {Function|Function[]} handlers - Function(s) to execute. Each function may return a Promise.\n * @param   {EventEmitter}        object   - Objecto call event on.\n * @param   {Any[]}               [args]   - Arguments to pass to each called function.\n * @returns {Promise} Promise resolved once each function is executed.\n * @memberof SequentialEvent\n * @author Gerkin\n * @private\n */\nfunction emitHandlers( handlers, object, args ) {\n\t// Check if the provided handler is a single function or an array of functions\n\tif ( 'function' === typeof handlers ) {\n\t\treturn emitHandler( handlers, object, args );\n\t} else {\n\t\tlet i = 0;\n\t\tconst handlersLength = handlers.length;\n\n\t\tconst sourcePromise = new Promise(( resolve, reject ) => {\n\t\t\t/**\n\t\t\t * Generate next promise for sequence.\n\t\t\t *\n\t\t\t * @param   {Any} prevResolve - Event chain resolved value.\n\t\t\t * @returns {undefined} *This function does not return anything*.\n\t\t\t * @memberof SequentialEvent\n\t\t\t * @author Gerkin\n\t\t\t * @inner\n\t\t\t */\n\t\t\tfunction getNextPromise( prevResolve ) {\n\t\t\t\tif ( i < handlersLength ) {\n\t\t\t\t\tconst stepArgs = 'undefined' !== typeof prevResolve ? args.concat([ prevResolve ]) : args.slice( 0 );\n\t\t\t\t\tconst newPromise = emitHandler( handlers[i], object, stepArgs );\n\t\t\t\t\tnewPromise.then( getNextPromise ).catch( reject );\n\t\t\t\t\ti++;\n\t\t\t\t} else {\n\t\t\t\t\treturn resolve.call( null, prevResolve );\n\t\t\t\t}\n\t\t\t}\n\t\t\tgetNextPromise();\n\t\t});\n\t\treturn sourcePromise;\n\t}\n}\n\n/**\n * Handle execution of a single handler.\n *\n * @param   {Function}     handler - Function to execute. It may return a Promise.\n * @param   {EventEmitter} object  - Object to call event on.\n * @param   {Any[]}        [args]  - Arguments to pass to each called function.\n * @returns {Promise} Promise resolved once this function is done.\n * @memberof SequentialEvent\n * @author Gerkin\n * @private\n */\nfunction emitHandler( handler, object, args ) {\n\ttry {\n\t\tconst retVal = handler.apply( object, args );\n\t\tif ( 'object' === typeof retVal && 'function' === typeof retVal.then ) {\n\t\t\treturn retVal;\n\t\t} else {\n\t\t\treturn Promise.resolve( retVal );\n\t\t}\n\t} catch ( e ) {\n\t\treturn Promise.reject( e );\n\t}\n}\n\n/**\n * Empty class that will be mixed with uEvent\n *\n * @author Gerkin\n * @mixin uEvent\n */\nclass Proto {}\n\nuEvent.mixin( Proto.prototype, {\n\ttrigger: 'emit',\n});\n\n/**\n * Event emitter that guarantees sequential execution of handlers. Each handler may return a **Promise**.\n *\n * @extends uEvent\n * @see {@link https://nodejs.org/api/events.html Node EventEmitter}.\n */\nclass SequentialEvent extends Proto {\n\t/**\n\t * Constructs a new SequentialEvent.\n\t *\n\t * @author Gerkin\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * SequentialEvents each corresponding handlers in sequence.\n\t *\n\t * @param   {Any}   type   - Name of the event to sequential-event.\n\t * @param   {Any[]} [args] - Parameters to pass to handlers.\n\t * @returns {Promise} Returns a Promise resolved when then chain is done.\n\t * @author Gerkin\n\t */\n\temit( type, ...args ) {\n\t\tconst events = this.__events;\n\t\tif ( !events ) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst handler = events[type];\n\n\t\tif ( !handler ) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst retPromise = emitHandlers( handler, this, args );\n\n\t\treturn retPromise;\n\t}\n}\n\nmodule.exports = SequentialEvent;\n\n},{\"uevent\":2}],2:[function(require,module,exports){\n/*!\n * uEvent - to make any js object an event emitter\n * Copyright 2011 Jerome Etienne (http://jetienne.com)\n * Copyright 2015-2016 Damien \"Mistic\" Sorel (http://www.strangeplanet.fr)\n * Licensed under MIT (http://opensource.org/licenses/MIT)\n */\n\n(function(root, factory) {\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = factory();\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([], factory);\n    }\n    else {\n        root.uEvent = factory();\n    }\n}(this, function() {\n    \"use strict\";\n\n    var returnTrue = function() {\n        return true;\n    };\n    var returnFalse = function() {\n        return false;\n    };\n\n    var uEvent = function() {\n    };\n\n    /**\n     * Event object used to stop propagations and prevent default\n     */\n    uEvent.Event = function(type, args) {\n        var typeReadOnly = type;\n        var argsReadonly = args;\n\n        Object.defineProperties(this, {\n            'type': {\n                get: function() {\n                    return typeReadOnly;\n                },\n                set: function(value) {\n                },\n                enumerable: true\n            },\n            'args': {\n                get: function() {\n                    return argsReadonly;\n                },\n                set: function(value) {\n                },\n                enumerable: true\n            }\n        });\n    };\n\n    uEvent.Event.prototype = {\n        constructor: uEvent.Event,\n\n        isDefaultPrevented: returnFalse,\n        isPropagationStopped: returnFalse,\n\n        preventDefault: function() {\n            this.isDefaultPrevented = returnTrue;\n        },\n        stopPropagation: function() {\n            this.isPropagationStopped = returnTrue;\n        }\n    };\n\n    uEvent.prototype = {\n        constructor: uEvent,\n\n        /**\n         * Add one or many event handlers\n         *\n         *  obj.on('event', callback)\n         *  obj.on('event', listener) -- listener has an handleEvent method\n         *  obj.on('event1 event2', callback)\n         *  obj.on({ event1: callback1, event2: callback2 })\n         *\n         * @param {String,Object} events\n         * @param {Function,optional} callback\n         * @return {Object} main object\n         */\n        on: function(events, callback) {\n            this.__events = this.__events || {};\n\n            if (typeof events === 'object') {\n                for (var event in events) {\n                    if (events.hasOwnProperty(event)) {\n                        this.__events[event] = this.__events[event] || [];\n                        this.__events[event].push(events[event]);\n                    }\n                }\n            }\n            else {\n                events.split(' ').forEach(function(event) {\n                    this.__events[event] = this.__events[event] || [];\n                    this.__events[event].push(callback);\n                }, this);\n            }\n\n            return this;\n        },\n\n        /**\n         * Remove one or many or all event handlers\n         *\n         *  obj.off('event')\n         *  obj.off('event', callback)\n         *  obj.off('event1 event2')\n         *  obj.off({ event1: callback1, event2: callback2 })\n         *  obj.off()\n         *\n         * @param {String|Object,optional} events\n         * @param {Function,optional} callback\n         * @return {Object} main object\n         */\n        off: function(events, callback) {\n            this.__events = this.__events || {};\n\n            if (typeof events === 'object') {\n                for (var event in events) {\n                    if (events.hasOwnProperty(event) && (event in this.__events)) {\n                        var index = this.__events[event].indexOf(events[event]);\n                        if (index !== -1) this.__events[event].splice(index, 1);\n                    }\n                }\n            }\n            else if (!!events) {\n                events.split(' ').forEach(function(event) {\n                    if (event in this.__events) {\n                        if (callback) {\n                            var index = this.__events[event].indexOf(callback);\n                            if (index !== -1) this.__events[event].splice(index, 1);\n                        }\n                        else {\n                            this.__events[event].length = 0;\n                        }\n                    }\n                }, this);\n            }\n            else {\n                this.__events = {};\n            }\n\n            return this;\n        },\n\n        /**\n         * Add one or many event handlers that will be called only once\n         * This handlers are only applicable to \"trigger\", not \"change\"\n         *\n         *  obj.once('event', callback)\n         *  obj.once('event1 event2', callback)\n         *  obj.once({ event1: callback1, event2: callback2 })\n         *\n         * @param {String|Object} events\n         * @param {Function,optional} callback\n         * @return {Object} main object\n         */\n        once: function(events, callback) {\n            this.__once = this.__once || {};\n\n            if (typeof events === 'object') {\n                for (var event in events) {\n                    if (events.hasOwnProperty(event)) {\n                        this.__once[event] = this.__once[event] || [];\n                        this.__once[event].push(events[event]);\n                    }\n                }\n            }\n            else {\n                events.split(' ').forEach(function(event) {\n                    this.__once[event] = this.__once[event] || [];\n                    this.__once[event].push(callback);\n                }, this);\n            }\n\n            return this;\n        },\n\n        /**\n         * Trigger all handlers for an event\n         *\n         * @param {String} event name\n         * @param {mixed...,optional} arguments\n         * @return {uEvent.Event}\n         */\n        trigger: function(event /* , args... */) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            var e = new uEvent.Event(event, args);\n            var i, l, f;\n\n            args.push(e);\n\n            if (this.__events && event in this.__events) {\n                for (i = 0, l = this.__events[event].length; i < l; i++) {\n                    f = this.__events[event][i];\n                    if (typeof f === 'object') {\n                        f.handleEvent(e);\n                    }\n                    else {\n                        f.apply(this, args);\n                    }\n                    if (e.isPropagationStopped()) {\n                        return e;\n                    }\n                }\n            }\n\n            if (this.__once && event in this.__once) {\n                for (i = 0, l = this.__once[event].length; i < l; i++) {\n                    f = this.__once[event][i];\n                    if (typeof f === 'object') {\n                        f.handleEvent(e);\n                    }\n                    else {\n                        f.apply(this, args);\n                    }\n                    if (e.isPropagationStopped()) {\n                        delete this.__once[event];\n                        return e;\n                    }\n                }\n                delete this.__once[event];\n            }\n\n            return e;\n        },\n\n        /**\n         * Trigger all modificators for an event, each handler must return a value\n         *\n         * @param {String} event name\n         * @param {mixed} event value\n         * @param {mixed...,optional} arguments\n         * @return {mixed} modified value\n         */\n        change: function(event, value /* , args... */) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            var e = new uEvent.Event(event, args);\n            var i, l, f;\n\n            args.push(e);\n\n            if (this.__events && event in this.__events) {\n                for (i = 0, l = this.__events[event].length; i < l; i++) {\n                    args[0] = value;\n                    f = this.__events[event][i];\n                    if (typeof f === 'object') {\n                        value = f.handleEvent(e);\n                    }\n                    else {\n                        value = f.apply(this, args);\n                    }\n                    if (e.isPropagationStopped()) {\n                        return value;\n                    }\n                }\n            }\n\n            return value;\n        }\n    };\n\n    /**\n     * Copy all uEvent functions in the destination object\n     *\n     * @param {Object} target, the object which will support uEvent\n     * @param {Object,optional} names, strings map to rename methods\n     */\n    uEvent.mixin = function(target, names) {\n        names = names || {};\n        target = typeof target === 'function' ? target.prototype : target;\n\n        ['on', 'off', 'once', 'trigger', 'change'].forEach(function(name) {\n            var method = names[name] || name;\n            target[method] = uEvent.prototype[name];\n        });\n\n        Object.defineProperties(target, {\n            '__events': {\n                value: null,\n                writable: true\n            },\n            '__once': {\n                value: null,\n                writable: true\n            }\n        });\n    };\n\n    return uEvent;\n}));\n\n},{}]},{},[1])(1)\n});"]}