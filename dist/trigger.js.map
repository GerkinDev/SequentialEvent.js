{"version":3,"sources":["trigger.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","process","EventEmitter","emitHandlers","handlers","object","args","emitHandler","handlersLength","sourcePromise","Promise","resolve","reject","getNextPromise","newPromise","then","catch","handler","retVal","apply","constructor","Trigger","type","needDomainExit","doError","events","_events","error","domain","er","arguments","domainEmitter","domainThrown","emit","err","context","enter","retPromise","exit","_maxListeners","undefined","prototype","defaultMaxListeners","setMaxListeners","isNumber","isNaN","TypeError","len","listeners","isObject","isUndefined","isFunction","Array","slice","addListener","listener","m","newListener","push","warned","console","trace","on","once","fired","g","removeListener","list","position","splice","removeAllListeners","key","ret","listenerCount","evlistener","emitter","arg","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","nextTick","Item","array","title","browser","env","argv","version","versions","noop","off","prependListener","prependOnceListener","name","binding","cwd","chdir","dir","umask"],"mappings":";;;;;;;;;;;;AAAA,CAAC,SAASA,CAAT,CAAWC,CAAX,EAAaC,CAAb,EAAeC,CAAf,EAAiB;AAAC,WAASC,CAAT,CAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,QAAG,CAACJ,EAAEG,CAAF,CAAJ,EAAS;AAAC,UAAG,CAACJ,EAAEI,CAAF,CAAJ,EAAS;AAAC,YAAIE,IAAE,OAAOC,OAAP,IAAgB,UAAhB,IAA4BA,OAAlC,CAA0C,IAAG,CAACF,CAAD,IAAIC,CAAP,EAAS,OAAOA,EAAEF,CAAF,EAAI,CAAC,CAAL,CAAP,CAAe,IAAGI,CAAH,EAAK,OAAOA,EAAEJ,CAAF,EAAI,CAAC,CAAL,CAAP,CAAe,IAAIK,IAAE,IAAIC,KAAJ,CAAU,yBAAuBN,CAAvB,GAAyB,GAAnC,CAAN,CAA8C,MAAMK,EAAEE,IAAF,GAAO,kBAAP,EAA0BF,CAAhC;AAAkC,WAAIG,IAAEX,EAAEG,CAAF,IAAK,EAACS,SAAQ,EAAT,EAAX,CAAwBb,EAAEI,CAAF,EAAK,CAAL,EAAQU,IAAR,CAAaF,EAAEC,OAAf,EAAuB,UAASd,CAAT,EAAW;AAAC,YAAIE,IAAED,EAAEI,CAAF,EAAK,CAAL,EAAQL,CAAR,CAAN,CAAiB,OAAOI,EAAEF,IAAEA,CAAF,GAAIF,CAAN,CAAP;AAAgB,OAApE,EAAqEa,CAArE,EAAuEA,EAAEC,OAAzE,EAAiFd,CAAjF,EAAmFC,CAAnF,EAAqFC,CAArF,EAAuFC,CAAvF;AAA0F,YAAOD,EAAEG,CAAF,EAAKS,OAAZ;AAAoB,OAAIL,IAAE,OAAOD,OAAP,IAAgB,UAAhB,IAA4BA,OAAlC,CAA0C,KAAI,IAAIH,IAAE,CAAV,EAAYA,IAAEF,EAAEa,MAAhB,EAAuBX,GAAvB;AAA2BD,MAAED,EAAEE,CAAF,CAAF;AAA3B,GAAmC,OAAOD,CAAP;AAAS,CAAzb,EAA2b,EAAC,GAAE,CAAC,UAASI,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC/d,KAAC,UAAUI,OAAV,EAAkB;AACnB;;AAEA,UAAMC,eAAeX,QAAS,QAAT,EAAoBW,YAAzC;;AAEA;;;;;;;AAOA,eAASC,YAAT,CAAuBC,QAAvB,EAAiCC,MAAjC,EAAyCC,IAAzC,EAAgD;AAC/C;AACA,YAAK,eAAe,OAAOF,QAA3B,EAAsC;AACrC,iBAAOG,YAAaH,QAAb,EAAuBC,MAAvB,EAA+BC,IAA/B,CAAP;AACA,SAFD,MAEO;AACN,cAAId,IAAI,CAAR;AACA,cAAMgB,iBAAiBJ,SAASL,MAAhC;;AAEA,cAAMU,gBAAgB,IAAIC,OAAJ,CAAY,UAAEC,OAAF,EAAWC,MAAX,EAAuB;AACxD;;;;AAIA,qBAASC,cAAT,GAA0B;AACzB,kBAAKrB,IAAIgB,cAAT,EAA0B;AACzB,oBAAMM,aAAaP,YAAaH,SAASZ,CAAT,CAAb,EAA0Ba,MAA1B,EAAkCC,IAAlC,CAAnB;AACAQ,2BAAWC,IAAX,CAAgB;AAAA,yBAAMF,gBAAN;AAAA,iBAAhB,EAAwCG,KAAxC,CAA+CJ,MAA/C;AACApB;AACA,eAJD,MAIO;AACN,uBAAOmB,SAAP;AACA;AACD;AACDE;AACA,WAfqB,CAAtB;AAgBA,iBAAOJ,aAAP;AACA;AACD;;AAED;;;;;;;AAOA,eAASF,WAAT,CAAsBU,OAAtB,EAA+BZ,MAA/B,EAAuCC,IAAvC,EAA8C;AAC7C,YAAMY,SAASD,QAAQE,KAAR,CAAed,MAAf,EAAuBC,IAAvB,CAAf;AACA,YAAK,qBAAoBY,MAApB,yCAAoBA,MAApB,MAA8BR,YAAYQ,OAAOE,WAAtD,EAAoE;AACnE,iBAAOF,MAAP;AACA,SAFD,MAEO;AACN,iBAAOR,QAAQC,OAAR,EAAP;AACA;AACD;;AAED;;;;AAxDmB,UA2DbU,OA3Da;AAAA;;AA4DlB;;;AAGA,2BAAc;AAAA;;AAAA;AAEb;;AAED;;;;;;;;AAnEkB;AAAA;AAAA,+BAyEZC,IAzEY,EAyEI;AAAA,8CAAPhB,IAAO;AAAPA,kBAAO;AAAA;;AACrB,gBAAIiB,iBAAiB,KAArB;AACA,gBAAIC,UAAY,YAAYF,IAA5B;;AAEA,gBAAMG,SAAS,KAAKC,OAApB;AACA,gBAAKD,MAAL,EAAc;AACbD,wBAAYA,WAAW,QAAQC,OAAOE,KAAtC;AACA,aAFD,MAEO,IAAK,CAACH,OAAN,EAAgB;AACtB,qBAAO,KAAP;AACA;;AAED,gBAAMI,SAAS,KAAKA,MAApB;;AAEA;AACA,gBAAKJ,OAAL,EAAe;AACd,kBAAIK,WAAJ;AACA,kBAAKC,UAAU/B,MAAV,GAAmB,CAAxB,EAA4B;AAC3B8B,qBAAKC,UAAU,CAAV,CAAL;AACA;AACD,kBAAKF,MAAL,EAAc;AACb,oBAAK,CAACC,EAAN,EAAW;AACVA,uBAAK,IAAInC,KAAJ,CAAW,yBAAX,CAAL;AACA;AACD,oBAAK,qBAAoBmC,EAApB,yCAAoBA,EAApB,MAA0BA,OAAO,IAAtC,EAA6C;AAC5CA,qBAAGE,aAAH,GAAmB,IAAnB;AACAF,qBAAGD,MAAH,GAAYA,MAAZ;AACAC,qBAAGG,YAAH,GAAkB,KAAlB;AACA;AACDJ,uBAAOK,IAAP,CAAa,OAAb,EAAsBJ,EAAtB;AACA,eAVD,MAUO,IAAKA,cAAcnC,KAAnB,EAA2B;AACjC,sBAAMmC,EAAN,CADiC,CACvB;AACV,eAFM,MAEA;AACN;AACA,oBAAMK,MAAM,IAAIxC,KAAJ,kCAA0CmC,EAA1C,OAAZ;AACAK,oBAAIC,OAAJ,GAAcN,EAAd;AACA,sBAAMK,GAAN;AACA;AACD,qBAAO,KAAP;AACA;;AAED,gBAAMjB,UAAUQ,OAAOH,IAAP,CAAhB;;AAEA,gBAAK,CAACL,OAAN,EAAgB;AACf,qBAAO,KAAP;AACA;;AAED,gBAAK,gBAAgB,OAAOhB,OAAvB,IAAkC2B,MAAlC,IAA4C,SAAS3B,OAA1D,EAAoE;AACnE2B,qBAAOQ,KAAP;AACAb,+BAAiB,IAAjB;AACA;;AAED,gBAAMc,aAAalC,aAAcc,OAAd,EAAuB,IAAvB,EAA6BX,IAA7B,CAAnB;;AAEA,gBAAKiB,cAAL,EAAsB;AACrBK,qBAAOU,IAAP;AACA;;AAED,mBAAOD,UAAP;AACA;AAnIiB;;AAAA;AAAA,QA2DGnC,YA3DH;;AAsInBF,aAAOH,OAAP,GAAiBwB,OAAjB;AAEC,KAxID,EAwIGvB,IAxIH,CAwIQ,IAxIR,EAwIaP,QAAQ,UAAR,CAxIb;AAyIC,GA1I6b,EA0I5b,EAAC,YAAW,CAAZ,EAAc,UAAS,CAAvB,EA1I4b,CAAH,EA0I9Z,GAAE,CAAC,UAASA,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAASK,YAAT,GAAwB;AACtB,WAAKwB,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AACA,WAAKa,aAAL,GAAqB,KAAKA,aAAL,IAAsBC,SAA3C;AACD;AACDxC,WAAOH,OAAP,GAAiBK,YAAjB;;AAEA;AACAA,iBAAaA,YAAb,GAA4BA,YAA5B;;AAEAA,iBAAauC,SAAb,CAAuBf,OAAvB,GAAiCc,SAAjC;AACAtC,iBAAauC,SAAb,CAAuBF,aAAvB,GAAuCC,SAAvC;;AAEA;AACA;AACAtC,iBAAawC,mBAAb,GAAmC,EAAnC;;AAEA;AACA;AACAxC,iBAAauC,SAAb,CAAuBE,eAAvB,GAAyC,UAAS1D,CAAT,EAAY;AACnD,UAAI,CAAC2D,SAAS3D,CAAT,CAAD,IAAgBA,IAAI,CAApB,IAAyB4D,MAAM5D,CAAN,CAA7B,EACE,MAAM6D,UAAU,6BAAV,CAAN;AACF,WAAKP,aAAL,GAAqBtD,CAArB;AACA,aAAO,IAAP;AACD,KALD;;AAOAiB,iBAAauC,SAAb,CAAuBR,IAAvB,GAA8B,UAASX,IAAT,EAAe;AAC3C,UAAIO,EAAJ,EAAQZ,OAAR,EAAiB8B,GAAjB,EAAsBzC,IAAtB,EAA4Bd,CAA5B,EAA+BwD,SAA/B;;AAEA,UAAI,CAAC,KAAKtB,OAAV,EACE,KAAKA,OAAL,GAAe,EAAf;;AAEF;AACA,UAAIJ,SAAS,OAAb,EAAsB;AACpB,YAAI,CAAC,KAAKI,OAAL,CAAaC,KAAd,IACCsB,SAAS,KAAKvB,OAAL,CAAaC,KAAtB,KAAgC,CAAC,KAAKD,OAAL,CAAaC,KAAb,CAAmB5B,MADzD,EACkE;AAChE8B,eAAKC,UAAU,CAAV,CAAL;AACA,cAAID,cAAcnC,KAAlB,EAAyB;AACvB,kBAAMmC,EAAN,CADuB,CACb;AACX,WAFD,MAEO;AACL;AACA,gBAAIK,MAAM,IAAIxC,KAAJ,CAAU,2CAA2CmC,EAA3C,GAAgD,GAA1D,CAAV;AACAK,gBAAIC,OAAJ,GAAcN,EAAd;AACA,kBAAMK,GAAN;AACD;AACF;AACF;;AAEDjB,gBAAU,KAAKS,OAAL,CAAaJ,IAAb,CAAV;;AAEA,UAAI4B,YAAYjC,OAAZ,CAAJ,EACE,OAAO,KAAP;;AAEF,UAAIkC,WAAWlC,OAAX,CAAJ,EAAyB;AACvB,gBAAQa,UAAU/B,MAAlB;AACE;AACA,eAAK,CAAL;AACEkB,oBAAQnB,IAAR,CAAa,IAAb;AACA;AACF,eAAK,CAAL;AACEmB,oBAAQnB,IAAR,CAAa,IAAb,EAAmBgC,UAAU,CAAV,CAAnB;AACA;AACF,eAAK,CAAL;AACEb,oBAAQnB,IAAR,CAAa,IAAb,EAAmBgC,UAAU,CAAV,CAAnB,EAAiCA,UAAU,CAAV,CAAjC;AACA;AACF;AACA;AACExB,mBAAO8C,MAAMX,SAAN,CAAgBY,KAAhB,CAAsBvD,IAAtB,CAA2BgC,SAA3B,EAAsC,CAAtC,CAAP;AACAb,oBAAQE,KAAR,CAAc,IAAd,EAAoBb,IAApB;AAdJ;AAgBD,OAjBD,MAiBO,IAAI2C,SAAShC,OAAT,CAAJ,EAAuB;AAC5BX,eAAO8C,MAAMX,SAAN,CAAgBY,KAAhB,CAAsBvD,IAAtB,CAA2BgC,SAA3B,EAAsC,CAAtC,CAAP;AACAkB,oBAAY/B,QAAQoC,KAAR,EAAZ;AACAN,cAAMC,UAAUjD,MAAhB;AACA,aAAKP,IAAI,CAAT,EAAYA,IAAIuD,GAAhB,EAAqBvD,GAArB;AACEwD,oBAAUxD,CAAV,EAAa2B,KAAb,CAAmB,IAAnB,EAAyBb,IAAzB;AADF;AAED;;AAED,aAAO,IAAP;AACD,KArDD;;AAuDAJ,iBAAauC,SAAb,CAAuBa,WAAvB,GAAqC,UAAShC,IAAT,EAAeiC,QAAf,EAAyB;AAC5D,UAAIC,CAAJ;;AAEA,UAAI,CAACL,WAAWI,QAAX,CAAL,EACE,MAAMT,UAAU,6BAAV,CAAN;;AAEF,UAAI,CAAC,KAAKpB,OAAV,EACE,KAAKA,OAAL,GAAe,EAAf;;AAEF;AACA;AACA,UAAI,KAAKA,OAAL,CAAa+B,WAAjB,EACE,KAAKxB,IAAL,CAAU,aAAV,EAAyBX,IAAzB,EACU6B,WAAWI,SAASA,QAApB,IACAA,SAASA,QADT,GACoBA,QAF9B;;AAIF,UAAI,CAAC,KAAK7B,OAAL,CAAaJ,IAAb,CAAL;AACE;AACA,aAAKI,OAAL,CAAaJ,IAAb,IAAqBiC,QAArB,CAFF,KAGK,IAAIN,SAAS,KAAKvB,OAAL,CAAaJ,IAAb,CAAT,CAAJ;AACH;AACA,aAAKI,OAAL,CAAaJ,IAAb,EAAmBoC,IAAnB,CAAwBH,QAAxB,EAFG;AAIH;AACA,aAAK7B,OAAL,CAAaJ,IAAb,IAAqB,CAAC,KAAKI,OAAL,CAAaJ,IAAb,CAAD,EAAqBiC,QAArB,CAArB;;AAEF;AACA,UAAIN,SAAS,KAAKvB,OAAL,CAAaJ,IAAb,CAAT,KAAgC,CAAC,KAAKI,OAAL,CAAaJ,IAAb,EAAmBqC,MAAxD,EAAgE;AAC9D,YAAI,CAACT,YAAY,KAAKX,aAAjB,CAAL,EAAsC;AACpCiB,cAAI,KAAKjB,aAAT;AACD,SAFD,MAEO;AACLiB,cAAItD,aAAawC,mBAAjB;AACD;;AAED,YAAIc,KAAKA,IAAI,CAAT,IAAc,KAAK9B,OAAL,CAAaJ,IAAb,EAAmBvB,MAAnB,GAA4ByD,CAA9C,EAAiD;AAC/C,eAAK9B,OAAL,CAAaJ,IAAb,EAAmBqC,MAAnB,GAA4B,IAA5B;AACAC,kBAAQjC,KAAR,CAAc,kDACA,qCADA,GAEA,kDAFd,EAGc,KAAKD,OAAL,CAAaJ,IAAb,EAAmBvB,MAHjC;AAIA,cAAI,OAAO6D,QAAQC,KAAf,KAAyB,UAA7B,EAAyC;AACvC;AACAD,oBAAQC,KAAR;AACD;AACF;AACF;;AAED,aAAO,IAAP;AACD,KAhDD;;AAkDA3D,iBAAauC,SAAb,CAAuBqB,EAAvB,GAA4B5D,aAAauC,SAAb,CAAuBa,WAAnD;;AAEApD,iBAAauC,SAAb,CAAuBsB,IAAvB,GAA8B,UAASzC,IAAT,EAAeiC,QAAf,EAAyB;AACrD,UAAI,CAACJ,WAAWI,QAAX,CAAL,EACE,MAAMT,UAAU,6BAAV,CAAN;;AAEF,UAAIkB,QAAQ,KAAZ;;AAEA,eAASC,CAAT,GAAa;AACX,aAAKC,cAAL,CAAoB5C,IAApB,EAA0B2C,CAA1B;;AAEA,YAAI,CAACD,KAAL,EAAY;AACVA,kBAAQ,IAAR;AACAT,mBAASpC,KAAT,CAAe,IAAf,EAAqBW,SAArB;AACD;AACF;;AAEDmC,QAAEV,QAAF,GAAaA,QAAb;AACA,WAAKO,EAAL,CAAQxC,IAAR,EAAc2C,CAAd;;AAEA,aAAO,IAAP;AACD,KAnBD;;AAqBA;AACA/D,iBAAauC,SAAb,CAAuByB,cAAvB,GAAwC,UAAS5C,IAAT,EAAeiC,QAAf,EAAyB;AAC/D,UAAIY,IAAJ,EAAUC,QAAV,EAAoBrE,MAApB,EAA4BP,CAA5B;;AAEA,UAAI,CAAC2D,WAAWI,QAAX,CAAL,EACE,MAAMT,UAAU,6BAAV,CAAN;;AAEF,UAAI,CAAC,KAAKpB,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAaJ,IAAb,CAAtB,EACE,OAAO,IAAP;;AAEF6C,aAAO,KAAKzC,OAAL,CAAaJ,IAAb,CAAP;AACAvB,eAASoE,KAAKpE,MAAd;AACAqE,iBAAW,CAAC,CAAZ;;AAEA,UAAID,SAASZ,QAAT,IACCJ,WAAWgB,KAAKZ,QAAhB,KAA6BY,KAAKZ,QAAL,KAAkBA,QADpD,EAC+D;AAC7D,eAAO,KAAK7B,OAAL,CAAaJ,IAAb,CAAP;AACA,YAAI,KAAKI,OAAL,CAAawC,cAAjB,EACE,KAAKjC,IAAL,CAAU,gBAAV,EAA4BX,IAA5B,EAAkCiC,QAAlC;AAEH,OAND,MAMO,IAAIN,SAASkB,IAAT,CAAJ,EAAoB;AACzB,aAAK3E,IAAIO,MAAT,EAAiBP,MAAM,CAAvB,GAA2B;AACzB,cAAI2E,KAAK3E,CAAL,MAAY+D,QAAZ,IACCY,KAAK3E,CAAL,EAAQ+D,QAAR,IAAoBY,KAAK3E,CAAL,EAAQ+D,QAAR,KAAqBA,QAD9C,EACyD;AACvDa,uBAAW5E,CAAX;AACA;AACD;AACF;;AAED,YAAI4E,WAAW,CAAf,EACE,OAAO,IAAP;;AAEF,YAAID,KAAKpE,MAAL,KAAgB,CAApB,EAAuB;AACrBoE,eAAKpE,MAAL,GAAc,CAAd;AACA,iBAAO,KAAK2B,OAAL,CAAaJ,IAAb,CAAP;AACD,SAHD,MAGO;AACL6C,eAAKE,MAAL,CAAYD,QAAZ,EAAsB,CAAtB;AACD;;AAED,YAAI,KAAK1C,OAAL,CAAawC,cAAjB,EACE,KAAKjC,IAAL,CAAU,gBAAV,EAA4BX,IAA5B,EAAkCiC,QAAlC;AACH;;AAED,aAAO,IAAP;AACD,KA3CD;;AA6CArD,iBAAauC,SAAb,CAAuB6B,kBAAvB,GAA4C,UAAShD,IAAT,EAAe;AACzD,UAAIiD,GAAJ,EAASvB,SAAT;;AAEA,UAAI,CAAC,KAAKtB,OAAV,EACE,OAAO,IAAP;;AAEF;AACA,UAAI,CAAC,KAAKA,OAAL,CAAawC,cAAlB,EAAkC;AAChC,YAAIpC,UAAU/B,MAAV,KAAqB,CAAzB,EACE,KAAK2B,OAAL,GAAe,EAAf,CADF,KAEK,IAAI,KAAKA,OAAL,CAAaJ,IAAb,CAAJ,EACH,OAAO,KAAKI,OAAL,CAAaJ,IAAb,CAAP;AACF,eAAO,IAAP;AACD;;AAED;AACA,UAAIQ,UAAU/B,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,aAAKwE,GAAL,IAAY,KAAK7C,OAAjB,EAA0B;AACxB,cAAI6C,QAAQ,gBAAZ,EAA8B;AAC9B,eAAKD,kBAAL,CAAwBC,GAAxB;AACD;AACD,aAAKD,kBAAL,CAAwB,gBAAxB;AACA,aAAK5C,OAAL,GAAe,EAAf;AACA,eAAO,IAAP;AACD;;AAEDsB,kBAAY,KAAKtB,OAAL,CAAaJ,IAAb,CAAZ;;AAEA,UAAI6B,WAAWH,SAAX,CAAJ,EAA2B;AACzB,aAAKkB,cAAL,CAAoB5C,IAApB,EAA0B0B,SAA1B;AACD,OAFD,MAEO,IAAIA,SAAJ,EAAe;AACpB;AACA,eAAOA,UAAUjD,MAAjB;AACE,eAAKmE,cAAL,CAAoB5C,IAApB,EAA0B0B,UAAUA,UAAUjD,MAAV,GAAmB,CAA7B,CAA1B;AADF;AAED;AACD,aAAO,KAAK2B,OAAL,CAAaJ,IAAb,CAAP;;AAEA,aAAO,IAAP;AACD,KAtCD;;AAwCApB,iBAAauC,SAAb,CAAuBO,SAAvB,GAAmC,UAAS1B,IAAT,EAAe;AAChD,UAAIkD,GAAJ;AACA,UAAI,CAAC,KAAK9C,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAaJ,IAAb,CAAtB,EACEkD,MAAM,EAAN,CADF,KAEK,IAAIrB,WAAW,KAAKzB,OAAL,CAAaJ,IAAb,CAAX,CAAJ,EACHkD,MAAM,CAAC,KAAK9C,OAAL,CAAaJ,IAAb,CAAD,CAAN,CADG,KAGHkD,MAAM,KAAK9C,OAAL,CAAaJ,IAAb,EAAmB+B,KAAnB,EAAN;AACF,aAAOmB,GAAP;AACD,KATD;;AAWAtE,iBAAauC,SAAb,CAAuBgC,aAAvB,GAAuC,UAASnD,IAAT,EAAe;AACpD,UAAI,KAAKI,OAAT,EAAkB;AAChB,YAAIgD,aAAa,KAAKhD,OAAL,CAAaJ,IAAb,CAAjB;;AAEA,YAAI6B,WAAWuB,UAAX,CAAJ,EACE,OAAO,CAAP,CADF,KAEK,IAAIA,UAAJ,EACH,OAAOA,WAAW3E,MAAlB;AACH;AACD,aAAO,CAAP;AACD,KAVD;;AAYAG,iBAAauE,aAAb,GAA6B,UAASE,OAAT,EAAkBrD,IAAlB,EAAwB;AACnD,aAAOqD,QAAQF,aAAR,CAAsBnD,IAAtB,CAAP;AACD,KAFD;;AAIA,aAAS6B,UAAT,CAAoByB,GAApB,EAAyB;AACvB,aAAO,OAAOA,GAAP,KAAe,UAAtB;AACD;;AAED,aAAShC,QAAT,CAAkBgC,GAAlB,EAAuB;AACrB,aAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AAED,aAAS3B,QAAT,CAAkB2B,GAAlB,EAAuB;AACrB,aAAO,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAf,IAA2BA,QAAQ,IAA1C;AACD;;AAED,aAAS1B,WAAT,CAAqB0B,GAArB,EAA0B;AACxB,aAAOA,QAAQ,KAAK,CAApB;AACD;AAEA,GAhT8B,EAgT7B,EAhT6B,CA1I4Z,EA0brb,GAAE,CAAC,UAASrF,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACzC;AACA,QAAII,UAAUD,OAAOH,OAAP,GAAiB,EAA/B;;AAEA;AACA;AACA;AACA;;AAEA,QAAIgF,gBAAJ;AACA,QAAIC,kBAAJ;;AAEA,aAASC,gBAAT,GAA4B;AACxB,YAAM,IAAIrF,KAAJ,CAAU,iCAAV,CAAN;AACH;AACD,aAASsF,mBAAT,GAAgC;AAC5B,YAAM,IAAItF,KAAJ,CAAU,mCAAV,CAAN;AACH;AACA,iBAAY;AACT,UAAI;AACA,YAAI,OAAOuF,UAAP,KAAsB,UAA1B,EAAsC;AAClCJ,6BAAmBI,UAAnB;AACH,SAFD,MAEO;AACHJ,6BAAmBE,gBAAnB;AACH;AACJ,OAND,CAME,OAAOhG,CAAP,EAAU;AACR8F,2BAAmBE,gBAAnB;AACH;AACD,UAAI;AACA,YAAI,OAAOG,YAAP,KAAwB,UAA5B,EAAwC;AACpCJ,+BAAqBI,YAArB;AACH,SAFD,MAEO;AACHJ,+BAAqBE,mBAArB;AACH;AACJ,OAND,CAME,OAAOjG,CAAP,EAAU;AACR+F,6BAAqBE,mBAArB;AACH;AACJ,KAnBA,GAAD;AAoBA,aAASG,UAAT,CAAoBC,GAApB,EAAyB;AACrB,UAAIP,qBAAqBI,UAAzB,EAAqC;AACjC;AACA,eAAOA,WAAWG,GAAX,EAAgB,CAAhB,CAAP;AACH;AACD;AACA,UAAI,CAACP,qBAAqBE,gBAArB,IAAyC,CAACF,gBAA3C,KAAgEI,UAApE,EAAgF;AAC5EJ,2BAAmBI,UAAnB;AACA,eAAOA,WAAWG,GAAX,EAAgB,CAAhB,CAAP;AACH;AACD,UAAI;AACA;AACA,eAAOP,iBAAiBO,GAAjB,EAAsB,CAAtB,CAAP;AACH,OAHD,CAGE,OAAMrG,CAAN,EAAQ;AACN,YAAI;AACA;AACA,iBAAO8F,iBAAiB/E,IAAjB,CAAsB,IAAtB,EAA4BsF,GAA5B,EAAiC,CAAjC,CAAP;AACH,SAHD,CAGE,OAAMrG,CAAN,EAAQ;AACN;AACA,iBAAO8F,iBAAiB/E,IAAjB,CAAsB,IAAtB,EAA4BsF,GAA5B,EAAiC,CAAjC,CAAP;AACH;AACJ;AAGJ;AACD,aAASC,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,UAAIR,uBAAuBI,YAA3B,EAAyC;AACrC;AACA,eAAOA,aAAaI,MAAb,CAAP;AACH;AACD;AACA,UAAI,CAACR,uBAAuBE,mBAAvB,IAA8C,CAACF,kBAAhD,KAAuEI,YAA3E,EAAyF;AACrFJ,6BAAqBI,YAArB;AACA,eAAOA,aAAaI,MAAb,CAAP;AACH;AACD,UAAI;AACA;AACA,eAAOR,mBAAmBQ,MAAnB,CAAP;AACH,OAHD,CAGE,OAAOvG,CAAP,EAAS;AACP,YAAI;AACA;AACA,iBAAO+F,mBAAmBhF,IAAnB,CAAwB,IAAxB,EAA8BwF,MAA9B,CAAP;AACH,SAHD,CAGE,OAAOvG,CAAP,EAAS;AACP;AACA;AACA,iBAAO+F,mBAAmBhF,IAAnB,CAAwB,IAAxB,EAA8BwF,MAA9B,CAAP;AACH;AACJ;AAIJ;AACD,QAAIC,QAAQ,EAAZ;AACA,QAAIC,WAAW,KAAf;AACA,QAAIC,YAAJ;AACA,QAAIC,aAAa,CAAC,CAAlB;;AAEA,aAASC,eAAT,GAA2B;AACvB,UAAI,CAACH,QAAD,IAAa,CAACC,YAAlB,EAAgC;AAC5B;AACH;AACDD,iBAAW,KAAX;AACA,UAAIC,aAAa1F,MAAjB,EAAyB;AACrBwF,gBAAQE,aAAaG,MAAb,CAAoBL,KAApB,CAAR;AACH,OAFD,MAEO;AACHG,qBAAa,CAAC,CAAd;AACH;AACD,UAAIH,MAAMxF,MAAV,EAAkB;AACd8F;AACH;AACJ;;AAED,aAASA,UAAT,GAAsB;AAClB,UAAIL,QAAJ,EAAc;AACV;AACH;AACD,UAAIM,UAAUX,WAAWQ,eAAX,CAAd;AACAH,iBAAW,IAAX;;AAEA,UAAIzC,MAAMwC,MAAMxF,MAAhB;AACA,aAAMgD,GAAN,EAAW;AACP0C,uBAAeF,KAAf;AACAA,gBAAQ,EAAR;AACA,eAAO,EAAEG,UAAF,GAAe3C,GAAtB,EAA2B;AACvB,cAAI0C,YAAJ,EAAkB;AACdA,yBAAaC,UAAb,EAAyBK,GAAzB;AACH;AACJ;AACDL,qBAAa,CAAC,CAAd;AACA3C,cAAMwC,MAAMxF,MAAZ;AACH;AACD0F,qBAAe,IAAf;AACAD,iBAAW,KAAX;AACAH,sBAAgBS,OAAhB;AACH;;AAED7F,YAAQ+F,QAAR,GAAmB,UAAUZ,GAAV,EAAe;AAC9B,UAAI9E,OAAO,IAAI8C,KAAJ,CAAUtB,UAAU/B,MAAV,GAAmB,CAA7B,CAAX;AACA,UAAI+B,UAAU/B,MAAV,GAAmB,CAAvB,EAA0B;AACtB,aAAK,IAAIP,IAAI,CAAb,EAAgBA,IAAIsC,UAAU/B,MAA9B,EAAsCP,GAAtC,EAA2C;AACvCc,eAAKd,IAAI,CAAT,IAAcsC,UAAUtC,CAAV,CAAd;AACH;AACJ;AACD+F,YAAM7B,IAAN,CAAW,IAAIuC,IAAJ,CAASb,GAAT,EAAc9E,IAAd,CAAX;AACA,UAAIiF,MAAMxF,MAAN,KAAiB,CAAjB,IAAsB,CAACyF,QAA3B,EAAqC;AACjCL,mBAAWU,UAAX;AACH;AACJ,KAXD;;AAaA;AACA,aAASI,IAAT,CAAcb,GAAd,EAAmBc,KAAnB,EAA0B;AACtB,WAAKd,GAAL,GAAWA,GAAX;AACA,WAAKc,KAAL,GAAaA,KAAb;AACH;AACDD,SAAKxD,SAAL,CAAesD,GAAf,GAAqB,YAAY;AAC7B,WAAKX,GAAL,CAASjE,KAAT,CAAe,IAAf,EAAqB,KAAK+E,KAA1B;AACH,KAFD;AAGAjG,YAAQkG,KAAR,GAAgB,SAAhB;AACAlG,YAAQmG,OAAR,GAAkB,IAAlB;AACAnG,YAAQoG,GAAR,GAAc,EAAd;AACApG,YAAQqG,IAAR,GAAe,EAAf;AACArG,YAAQsG,OAAR,GAAkB,EAAlB,CA/JyC,CA+JnB;AACtBtG,YAAQuG,QAAR,GAAmB,EAAnB;;AAEA,aAASC,IAAT,GAAgB,CAAE;;AAElBxG,YAAQ6D,EAAR,GAAa2C,IAAb;AACAxG,YAAQqD,WAAR,GAAsBmD,IAAtB;AACAxG,YAAQ8D,IAAR,GAAe0C,IAAf;AACAxG,YAAQyG,GAAR,GAAcD,IAAd;AACAxG,YAAQiE,cAAR,GAAyBuC,IAAzB;AACAxG,YAAQqE,kBAAR,GAA6BmC,IAA7B;AACAxG,YAAQgC,IAAR,GAAewE,IAAf;AACAxG,YAAQ0G,eAAR,GAA0BF,IAA1B;AACAxG,YAAQ2G,mBAAR,GAA8BH,IAA9B;;AAEAxG,YAAQ+C,SAAR,GAAoB,UAAU6D,IAAV,EAAgB;AAAE,aAAO,EAAP;AAAW,KAAjD;;AAEA5G,YAAQ6G,OAAR,GAAkB,UAAUD,IAAV,EAAgB;AAC9B,YAAM,IAAInH,KAAJ,CAAU,kCAAV,CAAN;AACH,KAFD;;AAIAO,YAAQ8G,GAAR,GAAc,YAAY;AAAE,aAAO,GAAP;AAAY,KAAxC;AACA9G,YAAQ+G,KAAR,GAAgB,UAAUC,GAAV,EAAe;AAC3B,YAAM,IAAIvH,KAAJ,CAAU,gCAAV,CAAN;AACH,KAFD;AAGAO,YAAQiH,KAAR,GAAgB,YAAW;AAAE,aAAO,CAAP;AAAW,KAAxC;AAEC,GA1LO,EA0LN,EA1LM,CA1bmb,EAA3b,EAonBO,EApnBP,EAonBU,CAAC,CAAD,CApnBV","file":"trigger.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (process){\n'use strict';\n\nconst EventEmitter = require( 'events' ).EventEmitter;\n\n/**\n * Handle execution of all handlers in sequence\n * @param\t{Function|Function[]}\thandlers\tFunction(s) to execute. Each function may return a Promise\n * @param\t{EventEmitter}\t\t\tobject\t\tObjecto call event on\n * @param\t{Any[]}\t\t\t\t\t[args]\t\tArguments to pass to each called function\n * @returns\t{Promise}\t\t\t\tPromise resolved once each function is executed\n */\nfunction emitHandlers( handlers, object, args ) {\n\t// Check if the provided handler is a single function or an array of functions\n\tif ( 'function' === typeof handlers ) {\n\t\treturn emitHandler( handlers, object, args );\n\t} else {\n\t\tlet i = 0;\n\t\tconst handlersLength = handlers.length;\n\n\t\tconst sourcePromise = new Promise(( resolve, reject ) => {\n\t\t\t/**\n\t\t\t * Generate next promise for sequence\n\t\t\t * @returns {undefined}\n\t\t\t */\n\t\t\tfunction getNextPromise() {\n\t\t\t\tif ( i < handlersLength ) {\n\t\t\t\t\tconst newPromise = emitHandler( handlers[i], object, args );\n\t\t\t\t\tnewPromise.then(() => getNextPromise()).catch( reject );\n\t\t\t\t\ti++;\n\t\t\t\t} else {\n\t\t\t\t\treturn resolve();\n\t\t\t\t}\n\t\t\t}\n\t\t\tgetNextPromise();\n\t\t});\n\t\treturn sourcePromise;\n\t}\n}\n\n/**\n * Handle execution of a single handler\n * @param\t{Function}\t\thandler\tFunction to execute. It may return a Promise\n * @param\t{EventEmitter}\tobject\tObject to call event on\n * @param\t{Any[]}\t\t\t[args]\tArguments to pass to each called function\n * @returns\t{Promise}\t\tPromise resolved once this function is done\n */\nfunction emitHandler( handler, object, args ) {\n\tconst retVal = handler.apply( object, args );\n\tif ( 'object' === typeof retVal && Promise === retVal.constructor ) {\n\t\treturn retVal;\n\t} else {\n\t\treturn Promise.resolve();\n\t}\n}\n\n/**\n * @classdesc Event emitter that guarantees sequential execution of handlers. Each handler may return a **Promise**\n */\nclass Trigger extends EventEmitter {\n\t/**\n\t * Constructs a new Trigger\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Triggers each corresponding handlers in sequence\n\t * @param   {Any}\t\t\t\ttype\t\tName of the event to trigger\n\t * @param   {Any[]}\t\t\t\t[args...]\tParameters to pass to handlers\n\t * @returns\t{boolean|Promise}\tfalse if no handlers found or an error occured. Otherwise, returns a Promise resolved when then chain is done\n\t */\n\temit( type, ...args ) {\n\t\tlet needDomainExit = false;\n\t\tlet doError = ( 'error' === type );\n\n\t\tconst events = this._events;\n\t\tif ( events ) {\n\t\t\tdoError = ( doError && null == events.error );\n\t\t} else if ( !doError ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst domain = this.domain;\n\n\t\t// If there is no 'error' event listener then throw.\n\t\tif ( doError ) {\n\t\t\tlet er;\n\t\t\tif ( arguments.length > 1 ) {\n\t\t\t\ter = arguments[1];\n\t\t\t}\n\t\t\tif ( domain ) {\n\t\t\t\tif ( !er ) {\n\t\t\t\t\ter = new Error( 'Unhandled \"error\" event' );\n\t\t\t\t}\n\t\t\t\tif ( 'object' === typeof er && er !== null ) {\n\t\t\t\t\ter.domainEmitter = this;\n\t\t\t\t\ter.domain = domain;\n\t\t\t\t\ter.domainThrown = false;\n\t\t\t\t}\n\t\t\t\tdomain.emit( 'error', er );\n\t\t\t} else if ( er instanceof Error ) {\n\t\t\t\tthrow er; // Unhandled 'error' event\n\t\t\t} else {\n\t\t\t\t// At least give some kind of context to the user\n\t\t\t\tconst err = new Error( `Unhandled \"error\" event. (${  er  })` );\n\t\t\t\terr.context = er;\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tconst handler = events[type];\n\n\t\tif ( !handler ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( 'undefined' !== typeof process && domain && this !== process ) {\n\t\t\tdomain.enter();\n\t\t\tneedDomainExit = true;\n\t\t}\n\n\t\tconst retPromise = emitHandlers( handler, this, args );\n\n\t\tif ( needDomainExit ) {\n\t\t\tdomain.exit();\n\t\t}\n\n\t\treturn retPromise;\n\t}\n}\n\nmodule.exports = Trigger;\n\n}).call(this,require('_process'))\n},{\"_process\":3,\"events\":2}],2:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n},{}],3:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}]},{},[1]);\n"]}