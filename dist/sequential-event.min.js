/**
* @file sequential-event
* 
* This library is a variation of standard event emitters. Handlers are executed sequentialy, and may return Promises if it executes asynchronous code
* Built on 2017-10-30 23:02:09
*
* @license GPL-3.0
* @version 0.3.0
* @author Gerkin
*/
function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(n){if(Array.isArray(n)){for(var e=0,r=Array(n.length);e<n.length;e++)r[e]=n[e];return r}return Array.from(n)}var _createClass=function(){function n(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(n){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SequentialEvent=n()}}(function(){return function n(e,r,t){function o(f,u){if(!r[f]){if(!e[f]){var a="function"==typeof require&&require;if(!u&&a)return a(f,!0);if(i)return i(f,!0);var c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c}var s=r[f]={exports:{}};e[f][0].call(s.exports,function(n){var r=e[f][1][n];return o(r||n)},s,s.exports,n,e,r,t)}return r[f].exports}for(var i="function"==typeof require&&require,f=0;f<t.length;f++)o(t[f]);return o}({1:[function(n,e,r){"use strict";var t=function(n,e,r){if("function"==typeof n)return i(n,e,r);var t=o(n,e,r);return new Promise(t)},o=function(n,e,r){var t=0,o=n.length;return function(f,u){return function a(c){var s=n.length;if(s!==o&&(t-=o-s,o=s),!(t<o))return f.call(null,c);var l=void 0!==c?r.concat([c]):r.slice(0);i(n[t],e,l).then(a).catch(u),t++}()}},i=function(n,e,r){try{var t=n.apply(e,r);return"object"===(void 0===t?"undefined":_typeof(t))&&"function"==typeof t.then?t:Promise.resolve(t)}catch(n){return Promise.reject(n)}},f=function(n,e,r){var t=!1,o=function o(){if(!t)return n.off(e,o),t=!0,r.apply(void 0,arguments)};return o.origFn=r,o},u=function(n,e){var r=[n.indexOf(e),n.findIndex(function(n){return n.origFn===e})],t=Math.min.apply(Math,_toConsumableArray(r.filter(function(n){return n>=0})));isFinite(t)&&n.splice(t,1)},a=function(n,e,r){n[e]=s(n[e]).concat(s(r))},c=function(n,e){if("object"!==(void 0===n?"undefined":_typeof(n))){var r={};return n.split(" ").forEach(function(n){r[n]=e}),r}return n},s=function(n){return void 0===n?[]:Array===n.constructor?n:[n]},l=function(){function n(){_classCallCheck(this,n),this.__events={}}return _createClass(n,[{key:"emit",value:function(n){var e=this.__events[n];if(!e)return Promise.resolve();for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t(e,this,o)}},{key:"off",value:function(n,e){var r=this.__events;if(!n)return this.__events={},this;var t=c(n,e);for(var o in t)t.hasOwnProperty(o)&&(t[o]?u(r[o],t[o]):r[o]=[]);return this}},{key:"once",value:function(n,e){var r=this,t=this.__events,o=c(n,e);for(var i in o)!function(n){o.hasOwnProperty(n)&&s(o[n]).forEach(function(e){a(t,n,f(r,n,e))})}(i);return this}},{key:"on",value:function(n,e){var r=this.__events,t=c(n,e);for(var o in t)t.hasOwnProperty(o)&&a(r,o,t[o]);return this}}]),n}();e.exports=l},{}]},{},[1])(1)});